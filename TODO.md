## Refactoring
* Add arguments checks to most core methods.

## Tests
* Make tests for all message flow scenarios.
* Review other test cases.